(this["webpackJsonplottery-react"]=this["webpackJsonplottery-react"]||[]).push([[0],{203:function(e,t,n){},217:function(e,t){},226:function(e,t){},244:function(e,t){},246:function(e,t){},263:function(e,t){},264:function(e,t){},328:function(e,t){},330:function(e,t){},339:function(e,t){},341:function(e,t){},366:function(e,t){},368:function(e,t){},369:function(e,t){},375:function(e,t){},388:function(e,t){},400:function(e,t){},403:function(e,t){},408:function(e,t){},419:function(e,t){},422:function(e,t){},474:function(e,t,n){},476:function(e,t,n){"use strict";n.r(t);var a=n(15),c=n.n(a),i=n(193),r=n.n(i),s=(n(203),n(21)),u=n.n(s),o=n(102),l=n(25),b=n(67),j=n.n(b),p=new j.a(window.ethereum),d=n(4),f=n(6),y=new p.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"enter",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"getPlayers",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"manager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pickWinner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"players",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"random",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],"0x0B4cE45062305CbA76C1B5A728b7265e90b46819"),h=new(function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"getMenager",value:function(){return y.methods.manager().call()}},{key:"getPlayers",value:function(){return y.methods.getPlayers().call()}},{key:"getBalance",value:function(){return p.eth.getBalance(y.options.address)}},{key:"getAccounts",value:function(){return p.eth.getAccounts()}},{key:"enterLottery",value:function(e,t){return y.methods.enter().send({from:e[0],value:p.utils.toWei(t,"ether")})}},{key:"pickWinner",value:function(e){return y.methods.pickWinner().send({from:e[0]})}}]),e}()),m=(n(474),n(9));function O(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(),r=Object(l.a)(i,2),s=r[0],b=r[1],d=Object(a.useState)(),f=Object(l.a)(d,2),y=f[0],O=f[1],w=Object(a.useState)(),z=Object(l.a)(w,2),x=z[0],g=z[1],k=Object(a.useState)(0),v=Object(l.a)(k,2),N=v[0],C=v[1],S=Object(a.useState)(!1),M=Object(l.a)(S,2),B=M[0],A=M[1],T=Object(a.useState)(!1),W=Object(l.a)(T,2),E=W[0],P=W[1],D=Object(a.useState)(),F=Object(l.a)(D,2),I=F[0],J=F[1];Object(a.useEffect)((function(){h.getMenager().then((function(e){return c(e)})),h.getPlayers().then((function(e){return b(e)})),h.getBalance().then((function(e){return O(e)})),h.getAccounts().then((function(e){return g(e)})),window.ethereum&&(window.web3=new j.a(window.ethereum),window.ethereum.enable())}),[]),Object(a.useEffect)((function(){x&&function(){var e=!1;x.forEach((function(t){t===n&&(e=!0)})),A(e)}()}),[x,n]);var L=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==N){e.next=6;break}return J("Prosze poda\u0107 ilo\u015b\u0107 etheru"),e.abrupt("return",!1);case 6:if(!(N<0)){e.next=9;break}return J("Ilo\u015b\u0107 etheru nie mo\u017ce by\u0107 mniejsza ni\u017c 0"),e.abrupt("return",!1);case 9:return e.next=11,h.getAccounts();case 11:n=e.sent,J("Oczekiwanie na sukces transakcji..."),h.enterLottery(n,N).then((function(){h.getPlayers().then((function(e){return b(e)})),h.getBalance().then((function(e){return O(e)})),J("Do\u0142\u0105czy\u0142es do loterii!")})).catch((function(){return J()}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAccounts();case 2:t=e.sent,J("Oczekiwanie na wyb\xf3r zwyci\u0119zcy..."),h.pickWinner(t).then((function(){return J("Zwyciezca zosta\u0142 wybrany!")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"contentContainer",children:[Object(m.jsx)("p",{className:"title",children:"EthoLottery"}),Object(m.jsx)("span",{className:"description",children:"Blockchain w swojej naturze jest bardzo odporny na pr\xf3by oszustwa dlatego jest \u015bwietnym miejscem do tworzenia wszelkich gier losowych. Jako wielka rozproszona baza danych dost\u0119pna dla ka\u017cdego wszelkie proby niechcianych dzia\u0142a\u0144 s\u0105 odrazu widoczne."}),Object(m.jsx)("hr",{className:"customHr"}),Object(m.jsxs)("div",{className:"subContainer",children:[s&&y&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{className:"text",children:["Obecnie ",s.length," ",1===s.length?"cz\u0142owiek":"ludzi"," bierze udzia\u0142 w loterii."]}),Object(m.jsxs)("p",{className:"text",children:["Rywalizacja o wygran\u0105 ",p.utils.fromWei(y,"ether")," etheru!"]})]}),E?Object(m.jsxs)("div",{className:"inputContainer",children:[Object(m.jsx)("p",{className:"inputText",children:"Ilo\u015b\u0107 eteru wysy\u0142ana do loterii"}),Object(m.jsxs)("div",{className:"inputSubContainer",children:[Object(m.jsx)("input",{type:"number",className:"input",value:N,onChange:function(e){C(e.target.value)}}),Object(m.jsx)("button",{onClick:L,className:"lotteryButton",children:"Do\u0142\u0105cz"})]}),I&&Object(m.jsx)("p",{className:"notification",children:I})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"questionText",children:" Chcesz sp\xf3bowa\u0107 szcz\u0119\u015bcia?"}),Object(m.jsx)("button",{onClick:function(){P(!0)},className:"button",children:"Spr\xf3buj szcz\u0119\u015bcia"})]})]}),B&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("hr",{className:"menagerHr"}),Object(m.jsxs)("div",{className:"subContainer",children:[Object(m.jsx)("p",{className:"text",children:"Ready to pick a winner?"}),Object(m.jsx)("button",{className:"button",onClick:H,children:"Wybierz zwyci\u0119zce"})]})]})]}),n&&Object(m.jsxs)("p",{className:"footer",children:[" Kontrakt jest zarz\u0105dzany przez: ",n,"."]})]})}r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root"))}},[[476,1,2]]]);
//# sourceMappingURL=main.266155e1.chunk.js.map