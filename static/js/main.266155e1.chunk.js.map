{"version":3,"sources":["Utils/web3.js","Utils/lottery.js","Api/api.js","App.js","index.js"],"names":["web3","Web3","window","ethereum","eth","Contract","api","lottery","methods","manager","call","getPlayers","getBalance","options","address","getAccounts","accounts","value","enter","send","from","utils","toWei","pickWinner","App","useState","setManager","players","setPlayers","balance","setBalance","setAccounts","setValue","isManager","setIsManager","lotteryVisible","setLotteryVisible","notification","setNotification","useEffect","getMenager","then","res","enable","forEach","account","checkIfManager","onSubmit","event","a","preventDefault","enterLottery","catch","onClick","className","length","fromWei","type","onChange","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.266155e1.chunk.js","sourcesContent":["import Web3 from 'web3';\r\n\r\nconst web3 = new Web3(window.ethereum);\r\n\r\nexport default web3;\r\n","import web3 from './web3';\r\n\r\nconst address = '0x0B4cE45062305CbA76C1B5A728b7265e90b46819';\r\nconst abi = [\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"constructor\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"enter\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"payable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"getPlayers\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address[]\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address[]\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"manager\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"pickWinner\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"players\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"random\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t}\r\n];\r\n\r\nexport default new web3.eth.Contract(abi, address);\r\n","import lottery from '../Utils/lottery';\r\nimport web3 from '../Utils/web3';\r\n\r\nclass ApiServce {\r\n  getMenager() {\r\n    return lottery.methods.manager().call();\r\n  }\r\n\r\n  getPlayers() {\r\n    return lottery.methods.getPlayers().call()\r\n  }\r\n\r\n  getBalance() {\r\n    return web3.eth.getBalance(lottery.options.address)\r\n  }\r\n\r\n  getAccounts() {\r\n    return web3.eth.getAccounts()\r\n  }\r\n\r\n  enterLottery(accounts, value) {\r\n    return lottery.methods.enter().send(\r\n      {\r\n        from: accounts[0],\r\n        value: web3.utils.toWei(value, 'ether')\r\n      }\r\n    );\r\n  }\r\n\r\n  pickWinner(accounts) {\r\n    return lottery.methods.pickWinner().send(\r\n      {\r\n        from: accounts[0]\r\n      }\r\n    );\r\n  }\r\n}\r\n\r\nconst api = new ApiServce();\r\nexport default api;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Web3 from 'web3';\r\nimport web3 from './Utils/web3';\r\nimport api from './Api/api';\r\nimport './App.css';\r\n\r\nexport default function App() {\r\n  const [manager, setManager] = useState();\r\n  const [players, setPlayers] = useState();\r\n  const [balance, setBalance] = useState();\r\n  const [accounts, setAccounts] = useState();\r\n\r\n  const [value, setValue] = useState(0);\r\n  const [isManager, setIsManager] = useState(false);\r\n  const [lotteryVisible, setLotteryVisible] = useState(false);\r\n  const [notification, setNotification] = useState();\r\n\r\n  useEffect(() => {\r\n    const onInit = () => {\r\n      api.getMenager().then((res) => setManager(res));\r\n      api.getPlayers().then((res) => setPlayers(res));\r\n      api.getBalance().then((res) => setBalance(res));\r\n      api.getAccounts().then((res) => setAccounts(res));\r\n    }\r\n\r\n    const ethEnabled = () => {\r\n      if (window.ethereum) {\r\n        window.web3 = new Web3(window.ethereum);\r\n        window.ethereum.enable();\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    onInit()\r\n    ethEnabled()\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const checkIfManager = () => {\r\n      let isManager = false\r\n\r\n      accounts.forEach(account => {\r\n        if (account === manager) {\r\n          isManager = true\r\n        }\r\n      });\r\n\r\n      setIsManager(isManager)\r\n    }\r\n\r\n    accounts && checkIfManager()\r\n  }, [accounts, manager]);\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (value === 0) {\r\n      setNotification('Prosze podać ilość etheru')\r\n      return false\r\n    } else if (value < 0) {\r\n      setNotification('Ilość etheru nie może być mniejsza niż 0')\r\n      return false\r\n    }\r\n\r\n    const accounts = await api.getAccounts();\r\n\r\n    setNotification('Oczekiwanie na sukces transakcji...')\r\n\r\n    api.enterLottery(accounts, value)\r\n      .then(() => {\r\n        api.getPlayers().then((res) => setPlayers(res));\r\n        api.getBalance().then((res) => setBalance(res));\r\n        setNotification('Dołączyłes do loterii!')\r\n      })\r\n      .catch(() => setNotification())\r\n  };\r\n\r\n  const onClick = async () => {\r\n    const accounts = await api.getAccounts();\r\n\r\n    setNotification('Oczekiwanie na wybór zwycięzcy...')\r\n    api.pickWinner(accounts).then(() => setNotification('Zwyciezca został wybrany!'))\r\n  };\r\n\r\n  const handleInput = (event) => {\r\n    setValue(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"contentContainer\">\r\n        <p className=\"title\">EthoLottery</p>\r\n        <span className=\"description\">\r\n          Blockchain w swojej naturze jest bardzo odporny na próby oszustwa dlatego jest świetnym miejscem do tworzenia wszelkich gier losowych.\r\n          Jako wielka rozproszona baza danych dostępna dla każdego wszelkie proby niechcianych działań są odrazu widoczne.\r\n      </span>\r\n        <hr className=\"customHr\" />\r\n        <div className=\"subContainer\">\r\n          {(players && balance) &&\r\n            <>\r\n              <p className=\"text\">Obecnie {players.length} {players.length === 1 ? 'człowiek' : 'ludzi'} bierze udział w loterii.</p>\r\n              <p className=\"text\">Rywalizacja o wygraną {web3.utils.fromWei(balance, 'ether')} etheru!</p>\r\n            </>\r\n          }\r\n          {!lotteryVisible ?\r\n            <>\r\n              <p className=\"questionText\"> Chcesz spóbować szczęścia?</p>\r\n              <button\r\n                onClick={() => { setLotteryVisible(true) }}\r\n                className=\"button\">\r\n                Spróbuj szczęścia\r\n            </button>\r\n            </> :\r\n            <div className=\"inputContainer\">\r\n              <p className=\"inputText\">Ilość eteru wysyłana do loterii</p>\r\n              <div className=\"inputSubContainer\">\r\n                <input type='number' className=\"input\" value={value} onChange={handleInput} />\r\n                <button\r\n                  onClick={onSubmit}\r\n                  className=\"lotteryButton\">\r\n                  Dołącz\r\n              </button>\r\n              </div>\r\n              {notification && <p className=\"notification\">{notification}</p>}\r\n            </div>\r\n          }\r\n        </div>\r\n        {isManager &&\r\n          <>\r\n            <hr className=\"menagerHr\" />\r\n            <div className=\"subContainer\">\r\n              <p className=\"text\">Ready to pick a winner?</p>\r\n              <button\r\n                className=\"button\"\r\n                onClick={onClick}>\r\n                Wybierz zwycięzce\r\n          </button>\r\n            </div>\r\n          </>\r\n        }\r\n      </div>\r\n      {manager && <p className=\"footer\"> Kontrakt jest zarządzany przez: {manager}.</p>}\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}