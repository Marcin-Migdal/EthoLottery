{"version":3,"sources":["Utils/web3.js","Utils/lottery.js","Api/api.js","components/PickWinnerComponent/PickWinnerComponent.js","components/LotteryComponet/LotteryComponet.js","App.js","index.js"],"names":["web3","Web3","window","ethereum","eth","Contract","api","lottery","methods","manager","call","getPlayers","getBalance","options","address","getAccounts","accounts","value","enter","send","from","utils","toWei","pickWinner","PickWinnerComponent","useState","managerNotification","setManagerNotification","setIsManager","useEffect","a","isManager","forEach","account","checkIfManager","then","className","onClick","LotteryComponet","players","setPlayers","balance","setBalance","etherAmount","setEtherAmount","lotteryVisible","setLotteryVisible","notification","setNotification","res","onSubmit","event","preventDefault","enterLottery","catch","length","fromWei","type","onChange","target","App","setManager","getMenager","enable","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.07d77cf4.chunk.js","sourcesContent":["import Web3 from 'web3';\r\n\r\nconst web3 = new Web3(window.ethereum);\r\n\r\nexport default web3;\r\n","import web3 from './web3';\r\n\r\nconst address = '0x0B4cE45062305CbA76C1B5A728b7265e90b46819';\r\nconst abi = [\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"constructor\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"enter\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"payable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"getPlayers\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address[]\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address[]\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"manager\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"pickWinner\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"players\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"random\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t}\r\n];\r\n\r\nexport default new web3.eth.Contract(abi, address);\r\n","import lottery from '../Utils/lottery';\r\nimport web3 from '../Utils/web3';\r\n\r\nclass ApiServce {\r\n  getMenager() {\r\n    return lottery.methods.manager().call();\r\n  }\r\n\r\n  getPlayers() {\r\n    return lottery.methods.getPlayers().call()\r\n  }\r\n\r\n  getBalance() {\r\n    return web3.eth.getBalance(lottery.options.address)\r\n  }\r\n\r\n  getAccounts() {\r\n    return web3.eth.getAccounts()\r\n  }\r\n\r\n  enterLottery(accounts, value) {\r\n    return lottery.methods.enter().send(\r\n      {\r\n        from: accounts[0],\r\n        value: web3.utils.toWei(value, 'ether')\r\n      }\r\n    );\r\n  }\r\n\r\n  pickWinner(accounts) {\r\n    return lottery.methods.pickWinner().send(\r\n      {\r\n        from: accounts[0]\r\n      }\r\n    );\r\n  }\r\n}\r\n\r\nconst api = new ApiServce();\r\nexport default api;\r\n","import React, { useEffect, useState } from 'react'\r\nimport api from '../../Api/api';\r\nimport './PickWinnerComponent.css'\r\n\r\nexport default function PickWinnerComponent({ manager }) {\r\n  const [managerNotification, setManagerNotification] = useState();\r\n  const [isManager, setIsManager] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkIfManager = async () => {\r\n      const accounts = await api.getAccounts();\r\n      let isManager = false\r\n\r\n      accounts.forEach(account => {\r\n        if (account === manager) {\r\n          isManager = true\r\n        }\r\n      });\r\n\r\n      setIsManager(isManager)\r\n    }\r\n\r\n    checkIfManager()\r\n  }, [manager]);\r\n\r\n  const pickWinner = async () => {\r\n    const accounts = await api.getAccounts();\r\n\r\n    setManagerNotification('Oczekiwanie na wybór zwycięzcy...')\r\n    api.pickWinner(accounts)\r\n      .then(() => setManagerNotification('Zwyciezca został wybrany!'))\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {true &&\r\n        <div className=\"managerContainer\">\r\n          <hr className=\"myHr\" />\r\n          <p >Gotowy do wybrania zwycięzcy ?</p>\r\n          <button\r\n            className=\"button\"\r\n            onClick={pickWinner}>\r\n            Wybierz zwycięzce\r\n          </button>\r\n          {managerNotification && <p className=\"text\">{managerNotification}</p>}\r\n        </div>\r\n      }\r\n    </>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport api from '../../Api/api';\r\nimport web3 from '../../Utils/web3';\r\nimport './LotteryComponet.css';\r\n\r\nexport default function LotteryComponet() {\r\n  const [players, setPlayers] = useState();\r\n  const [balance, setBalance] = useState();\r\n\r\n  const [etherAmount, setEtherAmount] = useState(0);\r\n  const [lotteryVisible, setLotteryVisible] = useState(false);\r\n  const [notification, setNotification] = useState();\r\n\r\n  useEffect(() => {\r\n    const onInit = () => {\r\n      api.getPlayers().then((res) => setPlayers(res));\r\n      api.getBalance().then((res) => setBalance(res));\r\n    }\r\n\r\n    onInit()\r\n  }, []);\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (etherAmount === 0) {\r\n      setNotification('Prosze podać ilość etheru')\r\n      return false\r\n    } else if (etherAmount < 0) {\r\n      setNotification('Ilość etheru nie może być mniejsza niż 0')\r\n      return false\r\n    }\r\n\r\n    const accounts = await api.getAccounts();\r\n\r\n    setNotification('Oczekiwanie na sukces transakcji...')\r\n\r\n    api.enterLottery(accounts, etherAmount)\r\n      .then(() => {\r\n        api.getPlayers().then((res) => setPlayers(res));\r\n        api.getBalance().then((res) => setBalance(res));\r\n        setNotification('Dołączyłes do loterii!')\r\n      })\r\n      .catch(() => setNotification())\r\n  };\r\n\r\n  const handleInput = (event) => {\r\n    setEtherAmount(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div className=\"lotteryContainer\">\r\n      <hr className=\"myHr\" />\r\n      {(players && balance) &&\r\n        <>\r\n          <p >Obecnie {players.length} {players.length === 1 ? 'człowiek' : 'ludzi'} bierze udział w loterii.</p>\r\n          <p >Rywalizacja o wygraną {web3.utils.fromWei(balance, 'ether')} etheru!</p>\r\n        </>\r\n      }\r\n      {!lotteryVisible ?\r\n        <>\r\n          <p className=\"text\"> Chcesz spóbować szczęścia?</p>\r\n          <button\r\n            onClick={() => { setLotteryVisible(true) }}\r\n            className=\"button\">\r\n            Spróbuj szczęścia\r\n          </button>\r\n        </> :\r\n        <form className=\"inputContainer\" onSubmit={onSubmit}>\r\n          <p className=\"text\">Ilość eteru wysyłana do loterii</p>\r\n          <div className=\"inputSubContainer\">\r\n            <input type='number' className=\"input\" value={etherAmount} onChange={handleInput} />\r\n            <button\r\n              type=\"submit\"\r\n              className=\"button\">\r\n              Dołącz\r\n            </button>\r\n          </div>\r\n          {notification && <p>{notification}</p>}\r\n        </form>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport Web3 from 'web3';\r\nimport api from './Api/api';\r\nimport './App.css';\r\nimport PickWinnerComponent from './components/PickWinnerComponent/PickWinnerComponent';\r\nimport LotteryComponet from './components/LotteryComponet/LotteryComponet';\r\n\r\nexport default function App() {\r\n  const [manager, setManager] = useState();\r\n\r\n  useEffect(() => {\r\n    const getManager = () => {\r\n      api.getMenager().then((res) => setManager(res));\r\n    }\r\n\r\n    const ethEnabled = () => {\r\n      if (window.ethereum) {\r\n        window.web3 = new Web3(window.ethereum);\r\n        window.ethereum.enable();\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    getManager()\r\n    ethEnabled()\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <p className=\"title\">EthoLottery</p>\r\n      <span className=\"description\">\r\n        Blockchain w swojej naturze jest bardzo odporny na próby oszustwa dlatego jest świetnym miejscem do tworzenia wszelkich gier losowych.\r\n        Jako wielka rozproszona baza danych dostępna dla każdego wszelkie proby niechcianych działań są odrazu widoczne.\r\n        </span>\r\n      <LotteryComponet />\r\n      <PickWinnerComponent manager={manager} />\r\n      {manager &&\r\n        <p className=\"footer\"> Kontrakt jest zarządzany przez: {manager}.</p>\r\n      }\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}